<!DOCTYPE html>
<html>
<head>
    <title>AADC</title>
<link rel="icon" href="AADC.ico" type="image/x-icon">
    <style>
        /* Style for 'Directors Cut' */
        #directorsCut {
            font-style: italic;
            text-align: left;
            margin-top: 10px;
        }

        /* Centering buttons */
        .centered {
            text-align: center;
            position: fixed; /* Fix the position relative to the viewport */
            top: 80px; /* Adjust this value as needed to position from the top */
            width: 100%; /* Ensure the container spans the full width */
            z-index: 1000; /* Ensures the menu is above other content */
        }

        /* Button styling */
        button {
            margin: 5px;
            padding: 10px;
            opacity: 0; /* Initially hide buttons */
        }

        /* Animation keyframes */
        @keyframes slideInFromLeft {
            from {
                transform: translateX(-100%);
                opacity: 0;
            }

            to {
                transform: translateX(0);
                opacity: 1;
            }
        }

        @keyframes slideInFromTop {
            from {
                transform: translateY(-100%);
                opacity: 0;
            }

            to {
                transform: translateY(0);
                opacity: 1;
            }
        }

        @keyframes slideInFromRight {
            from {
                transform: translateX(100%);
                opacity: 0;
            }

            to {
                transform: translateX(0);
                opacity: 1;
            }
        }

        /* Fade-in animation */
        @keyframes fadeIn {
            from {
                opacity: 0;
            }

            to {
                opacity: 1;
            }
        }

        /* Style for the player, host, and both menu buttons */
        #playerMenu button, #hostMenu button, #bothMenu button {
            animation: fadeIn 0.4s ease-out; /* Fade-in effect */
            opacity: 0; /* Start invisible */
            position: fixed; /* Position relative to the viewport */
            bottom: 10px; /* Near the bottom of the screen */
        }

            /* Positioning for the first button (Reroll) in each menu */
            #playerMenu button:nth-child(1), #hostMenu button:nth-child(1), #bothMenu button:nth-child(1) {
                right: 30px; /* Near the bottom right */
            }

            /* Positioning for the second button (Back) in each menu */
            #playerMenu button:nth-child(2), #hostMenu button:nth-child(2), #bothMenu button:nth-child(2) {
                left: 30px; /* Near the bottom left */
            }
        
        #bothMenu button:nth-child(2) { /* Switch button */
            left: 50%; /* Center */
            transform: translateX(-50%); /* Adjust for button width */
        }
        
        #bothMenu button:nth-child(3) { /* Reroll Both button */
            right: 30px;
        }

        #bothPlayerDisplay, #bothHostDisplay {
            display: none; /* Initially hidden */
            justify-content: center;
            align-items: center;
            height: 80vh;
        }

        #bothPlayerNumberDisplay, #bothHostNumberDisplay {
            position: fixed;
            right: 30px; /* Adjust as needed */
            top: 50%;
            transform: translateY(-50%);
            font-size: 160px;
        }

        /* Assign animations to buttons */
        #playerButton {
            animation: slideInFromLeft 1s ease forwards;
        }
        
        #hostButton {
            animation: slideInFromTop 1s ease forwards;
        }
        
        #bothButton {
            animation: slideInFromRight 1s ease forwards;
        }
        
        #imageContainer {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 80vh; /* Full height of the viewport */
        }
        
        #imageContainer img {
            max-width: 80%;
            max-height: 100%;
            /* Maintain aspect ratio */
            height: auto;
            width: auto;
        }
        
        #numberDisplay {
            position: fixed; /* Fix the position relative to the viewport */
            right: 310px; /* 30px from the right side */
            top: 52.5%; /* Vertically centered */
            transform: translateY(-50%); /* Adjust vertical alignment */
            font-size: 160px; /* Font size */
        }
        
        /* Hide elements by default */
        .hidden {
            display: none;
        }
        
    </style>
</head>
<body>

    <!-- Container for the dynamic text -->
    <div id="dynamicText"></div>
    <div id="directorsCut"></div>
    <div id="numberDisplay"></div>
    <div id="imageContainer"></div>

    <!-- Main Menu -->
    <div class="centered hidden" id="mainMenu">
        <button id="playerButton" onclick="showMenu('player')">Player</button>
        <button id="hostButton" onclick="showMenu('host')">Host</button>
        <button id="bothButton" onclick="showMenu('both')">Both</button>
    </div>

    <!-- Player Menu -->
    <div class="centered hidden" id="playerMenu">
    <button id="rerollPlayerButton">Reroll player</button>
        <button onclick="showMenu('main')">Back</button>
    </div>

    <!-- Host Menu -->
    <div class="centered hidden" id="hostMenu">
        <button id="rerollHostButton">Reroll scene</button>
        <button onclick="showMenu('main')">Back</button>
    </div>

    <!-- Both Menu -->
    <div class="centered hidden" id="bothMenu">
        <button onclick="showMenu('main')">Back</button>
        <button id="switchButton">Switch</button>
        <button id="rerollBothButton">Reroll both</button>
        <div id="bothPlayerDisplay" class="imageContainer"></div>
        <div id="bothPlayerNumberDisplay"></div>
        <div id="bothHostDisplay" class="imageContainer"></div>
        <div id="bothHostNumberDisplay"></div>
    </div>

    <script>
        const mainText = "aaaaaaaaaaaaaaaaaaaand ACTION!";
        const subText = "Directors Cut";
        const mainContainer = document.getElementById('dynamicText');
        const subContainer = document.getElementById('directorsCut');
        const avoidList = [];
        const maxAvoidSize = 5;
        const totalImages = 20;
        const baseWidth = 3840; // Base width of the image
        const baseHeight = 1080; // Base height of the image
        const imageScale = 0.90; // Scale of the image (1 for 100%)
        let mainIndex = 0, subIndex = 0;

        function typeMainLetter() {
            if (mainIndex < mainText.length) {
                let span = document.createElement('span');
                span.innerText = mainText[mainIndex];
                let fontSize = mainIndex + 1;
                if (mainIndex >= 22) fontSize = 25;
                span.style.fontSize = fontSize + 'px';
                mainContainer.appendChild(span);
                mainIndex++;
                setTimeout(typeMainLetter, 90);
            } else {
                typeSubLetter();
            }
        }

        function revealMenu() {
            document.getElementById('mainMenu').classList.remove('hidden');
            document.getElementById('playerButton').style.animation = 'slideInFromLeft 1s ease forwards';
            document.getElementById('hostButton').style.animation = 'slideInFromTop 1s ease forwards';
            document.getElementById('bothButton').style.animation = 'slideInFromRight 1s ease forwards';
        }

        function typeSubLetter() {
            if (subIndex < subText.length) {
                let span = document.createElement('span');
                span.innerText = subText[subIndex];
                span.style.fontSize = '20px';
                subContainer.appendChild(span);
                subIndex++;
                setTimeout(typeSubLetter, 75);
            } else {
                setTimeout(revealMenu, 500); // Small delay before revealing the menu
            }
        }
        
        function getRandomImageId() {
            let randomId = Math.floor(Math.random() * totalImages) + 1;
            while (avoidList.includes(randomId)) {
                randomId = Math.floor(Math.random() * totalImages) + 1;
            }
            return randomId;
        }

                // Function to get a random image ID between 21 and 31
        function getRandomHostImageId() {
            return Math.floor(Math.random() * 11) + 21; // Generates a number from 21 to 31
        }

        function updateAvoidList(newId) {
            avoidList.push(newId);
            if (avoidList.length > maxAvoidSize) {
                avoidList.shift(); // Remove the oldest entry
            }
        }

        function displayImage(imageId, containerId) {
            const imagePath = `images/${imageId}.png`;
            const imgElement = document.createElement('img');
            imgElement.src = imagePath;
            imgElement.alt = `Image ${imageId}`;
            imgElement.style.width = `800px`;
            imgElement.style.height = `450px`;
        
            const imageContainer = document.getElementById(containerId);
            imageContainer.innerHTML = '';
            imageContainer.appendChild(imgElement);
        }

        function rerollPlayer() {
            const randomNumber = Math.floor(Math.random() * 4) + 1; // Generate a number from 1 to 4
            document.getElementById('numberDisplay').innerText = randomNumber; // Display only the number
        
            const imageId = getRandomImageId();
            displayImage(imageId);
            updateAvoidList(imageId);
        }

        // Reroll logic for the Host
        function rerollHost() {
            const randomNumber = Math.floor(Math.random() * 3) + 1; // Generate a number from 1 to 3
            document.getElementById('numberDisplay').innerText = randomNumber;
        
            const imageId = getRandomHostImageId(); // Get random image ID for host
            displayImage(imageId);
            updateAvoidList(imageId); // You might want to handle avoid list differently for host
        }

        function rerollBoth() {
            const playerImageId = getRandomImageId();
            const hostImageId = getRandomHostImageId();
            const playerNumber = Math.floor(Math.random() * 4) + 1;
            const hostNumber = Math.floor(Math.random() * 3) + 1;
        
            displayImage(playerImageId, 'bothPlayerDisplay');
            displayNumber(playerNumber, 'bothPlayerNumberDisplay');
            displayImage(hostImageId, 'bothHostDisplay');
            displayNumber(hostNumber, 'bothHostNumberDisplay');
        
            // Show player display by default
            document.getElementById('bothPlayerDisplay').style.display = 'flex';
            document.getElementById('bothHostDisplay').style.display = 'none';
            document.getElementById('bothPlayerNumberDisplay').style.display = 'block';
            document.getElementById('bothHostNumberDisplay').style.display = 'none';
        }
        
        function switchDisplay() {
            const playerDisplay = document.getElementById('bothPlayerDisplay');
            const hostDisplay = document.getElementById('bothHostDisplay');
            const playerNumberDisplay = document.getElementById('bothPlayerNumberDisplay');
            const hostNumberDisplay = document.getElementById('bothHostNumberDisplay');
            
            if (playerDisplay.style.display === 'none') {
                playerDisplay.style.display = 'flex';
                playerNumberDisplay.style.display = 'block';
                hostDisplay.style.display = 'none';
                hostNumberDisplay.style.display = 'none';
            } else {
                playerDisplay.style.display = 'none';
                playerNumberDisplay.style.display = 'none';
                hostDisplay.style.display = 'flex';
                hostNumberDisplay.style.display = 'block';
            }
        }

        function displayNumber(number, elementId) {
    const numberDisplay = document.getElementById(elementId);
    numberDisplay.innerText = number;
}
        
    function showMenu(menuType) {
        // Hide all menus
        document.getElementById('mainMenu').classList.add('hidden');
        document.getElementById('playerMenu').classList.add('hidden');
        document.getElementById('hostMenu').classList.add('hidden');
        document.getElementById('bothMenu').classList.add('hidden');

        if (menuType === 'player') {
            const playerMenu = document.getElementById('playerMenu');
            playerMenu.classList.remove('hidden');
            fadeInButtons(playerMenu);
            const rerollButton = document.getElementById('rerollPlayerButton');
            rerollButton.onclick = rerollPlayer; // Attach rerollPlayer function to the button
            rerollPlayer(); // Perform initial reroll when the menu is shown
        } else if (menuType === 'host') {
            const hostMenu = document.getElementById('hostMenu');
            hostMenu.classList.remove('hidden');
            fadeInButtons(hostMenu);
            const rerollButton = document.getElementById('rerollHostButton');
            rerollButton.onclick = rerollHost; // Attach rerollHost function to the button
            rerollHost(); // Perform initial reroll when the menu is shown
        } else if (menuType === 'both') {
            // Both menu logic
            const bothMenu = document.getElementById('bothMenu');
            bothMenu.classList.remove('hidden');
            fadeInButtons(bothMenu);
            const rerollButton = document.getElementById('rerollBothButton');
            const switchButton = document.getElementById('switchButton');
            rerollButton.onclick = rerollBoth;
            switchButton.onclick = switchDisplay;
            rerollBoth(); // Perform initial reroll when the menu is shown
        } else {
            document.getElementById('mainMenu').classList.remove('hidden');
        }

        // Clear image and number display when returning to main menu
        if (menuType === 'main') {
            document.getElementById('imageContainer').innerHTML = '';
            document.getElementById('numberDisplay').innerText = '';
        }
    }
        
        function fadeInButtons(menu) {
            Array.from(menu.getElementsByTagName('button')).forEach(button => {
                button.style.opacity = 1; // Make the buttons visible
            });
        }
        typeMainLetter();
    </script>

</body>
</html>
